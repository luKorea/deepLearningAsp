## 线程和进程
* 进程：
    * 程序的一次运行，它占有的一片独有的内存空间
    * 可以通过任务管理器查看
* 线程： 
    * 是进程内的一个独立执行单元
    * 是程序执行的一个完整流程
    * 是CPU调度的最小调度单元
* 关系：
    * 一个进程最少有一个线程
    * 程序是在某个进程的某个线程中执行的

## 浏览器内核模块组成
* 主线程：
    * js模块引擎： 负责js程序的编程和运行
    * html，css文档解析模块： 负责页面文本的解析（将页面文本解析成各个小块）
    * DOM/CSS模块：负责dom/css在内存中的相关处理（将文档解析模块解析的小块生成各个dom对象）
    * 布局和渲染模块：负责页面的布局和效果的绘制（确定各个对象的位置和尺寸，再进行绘制）
* 分线程： 
    * 定时器模块： 负责定时器的管理
    * 事件响应模块： 负责事件的管理
    * 网络请求模块： 负责Ajax请求           
    
## js线程
* js是单线程执行的（回调函数也是在主线程）
* H5提供了实现多线程的方案，Web Workers
* 只能是主线程更新页面

## 定时器问题
* 定时器不能真正定时执行
* 主线程进行了一个长时间操作的话，可能导致定时器延时处理

## 事件处理机制
* 代码分类
    * 初始化代码：也包含一些特定代码：DOM绑定事件监听，设置监听器，发送Ajax请求
    * 回调代码： 处理回调逻辑
* js引擎执行代码的基本流程：
    * 先执行初始化代码
    * 初始化代码全部执行完成以后才有可能在某个时间段执行回调代码    
* 事件循环模型最重要的两个部分：
    * 事件管理模块
    * 回调队列     
* 模块的运转流程：
    * 执行初始化代码， 将事件回调函数交给对应模块管理
    * 当事件发生时，管理模块会将回调函数及其数据添加回回调队列之中
    * 只有当初始化代码执行完毕以后（可能需要一定时间），才会遍历读取回调队列中的回调函数执行
    
## Web Workers
* 可以让js在分线程执行
* Worker
    ```js
  var worker = new Worker(‘分线程js URL’);
  worker.onmessage = function (event) {
    // event.data 接收到分线程传递的数据
  }
  worker.postMessage('数据'); // 向分线程发送数据
  ```
* 问题
    * Worker内代码不能操作DOM更新UI（根本看不到window）
    * 不是每个浏览器都支持Worker（H5新特性）
    * Worker不能跨域加载js  
     
